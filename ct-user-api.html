<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../ct-core-utils/ct-api-provider-behaviour.html">

<dom-module id="ct-user-api">
  <template>
    <iron-ajax id="getUser"></iron-ajax>
    <iron-ajax id="getUsers"></iron-ajax>
  </template>

  <script>
      Polymer({
          is: 'ct-user-api',
          behaviors: [CT.Behaviours.ApiProvider],

          /**
           * Get a user by id
           *
           * @returns {Promise}
           */
          getUser: function(id) {
              this.$.getUser.url = this._url('/users/' + id);
              return this._generateRequest(this.$.getUser);
          },

          /**
           * Get users
           *
           * @returns {Promise}
           */
          getUsers: function(groupId, pageNum, pageSize) {

              var pageNum = pageNum || 0,
                  pageSize = pageSize || 20,
                  params = '';

              params += '?group_id='+groupId;
              params += '&page_number='+pageNum;
              params += '&page_size='+pageSize;

              this.$.getUser.url = this._url('/users' + params);
              return this._generateRequest(this.$.getUser);
          },


      });
  </script>
</dom-module>
